ins: year
out: result
bootstrap: main
component:

    main:
        perform: pipeP
        parts:
            - <fetchImageAndCalendar>
            - <composeCalendar>
            - <writeCalendar>
            - <showCalendar>

    fetchImageAndCalendar:
        perform: concurrent
        parts:
            - <fetchImageUrl>
            - <fetchCalendar>

    composeCalendar:
        ins:
            - imageUrl
            - calendar
        out: result
        perform: wrapCommand
        parts: echo '<img src="' && echo ${1} && echo '"/>' && echo "<pre>" && echo ${2} && echo "</pre>"

    writeCalendar:
        ins: result
        perform: wrapCommand
        parts: echo ${1} > ${PWD}/calendar.html

    showCalendar:
        ins: []
        perform: wrapCommand
        parts: google-chrome file://${PWD}/calendar.html

    fetchCalendar:
        ins: year
        out: calendar
        perform: wrapCommand
        parts: ncal ${1} -h

    fetchImageUrl:
        out: imageUrl
        perform: pipeP
        parts:
            - <fetchImageObj>
            - <getImageUrl>

    fetchImageObj:
        ins: []
        perform: wrapCommand
        parts: curl https://aws.random.cat/meow

    getImageUrl:
        perform: prop
        parts: file
