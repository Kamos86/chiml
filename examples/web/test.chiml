parallel:

  # start web server
  - chie program.chiml

  - do:
    # wait for 3 seconds
    - [(cb) => {setTimeout(cb, 3000)}]

    # send http request
    - ("http://localhost:3000/hello/Einstein") -> [sys.httpRequest] -> response1
    - (response1) -> {console.log}

    # send json-rpc request
    - ("http://localhost:3000/rpc", "hello", "Newton") -> [sys.jsonRpcRequest] -> response2
    - (response2) -> {console.log}

